process CSA07_UE_DiMuonSkim = {
  # See https://twiki.cern.ch/twiki/bin/view/CMS/UEDY for some sort of documentation

  # initialize  MessageLogger
  include "FWCore/MessageLogger/data/MessageLogger.cfi"
  source = PoolSource {
        untracked vstring fileNames = {"file:./events.root"}
        untracked int32  maxEvents  = -1
  }

  include "SimGeneral/HepPDTESSource/data/pythiapdt.cfi"
  include "PhysicsTools/HepMCCandAlgos/data/genParticleCandidatesFast.cfi"

#  replace genParticleCandidates.src = "source"

#  include "HLTrigger/Muon/data/PathDiMuon_2x1033_Iso.cff"
  include "HLTrigger/Muon/data/PathDiMuon_2x1033_NoIso.cff"

  block AODEventContent = {
     untracked vstring outputCommands = {
      "drop *",
      "keep *_genParticleCandidates_*_*",
      "keep *_ctfWithMaterialTracks_*_*",
      "keep *_globalMuons_*_*",
      "keep edmTriggerResults_*_*_*",
      "keep *_l1extraParticles_*_*"
     }
  }

#  include "L1Trigger/Configuration/data/L1Trigger_EventContent.cff"
#  include "HLTrigger/Configuration/data/HLTrigger_EventContent.cff"
#  replace AODEventContent.outputCommands += L1TriggerAOD.outputCommands
#  replace AODEventContent.outputCommands += HLTriggerAOD.outputCommands

  path p = { genParticleCandidates, diMuonNoIso }

  module dumpAOD = PoolOutputModule {
    untracked string fileName = "file:skim_DiMuons.root"
    using AODEventContent
        untracked PSet SelectEvents = {
          vstring SelectEvents = { "p" }
        }
  }

  endpath e = { dumpAOD }
}
