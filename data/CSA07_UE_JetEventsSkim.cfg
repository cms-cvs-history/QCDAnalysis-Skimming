process CSA07_UE_JetEventsSkim = {

  ### keep the logging output to a nice level ###
  include "FWCore/MessageService/data/MessageLogger.cfi"

    source = PoolSource {
	untracked vstring fileNames = { "file:./events.root" }
	untracked int32 maxEvents = -1
    }

    include "HLTrigger/Configuration/data/common/HLTSetup.cff"
    sequence l1reco = { hltBegin }

#    include "L1Trigger/L1ExtraFromDigis/data/l1extra.cff"
    replace l1extraParticleMap.A_SingleJet100_prescale = 1
    replace l1extraParticleMap.A_SingleJet50_prescale = 1
    replace l1extraParticleMap.A_SingleJet20_prescale = 1
    replace l1extraParticleMap.A_SingleJet15_prescale = 1

    module  l1s1jetPELow  = hltLevel1Seed from "HLTrigger/HLTexample/data/hltLevel1Seed.cfi"
    replace l1s1jetPELow.L1Seeds = {"A_SingleJet15"}
    replace l1s1jetPELow.L1ExtraCollections = l1extraParticles
    replace l1s1jetPELow.L1ExtraParticleMap = l1extraParticleMap
    replace l1s1jetPELow.L1GTReadoutRecord  = l1extraParticleMap

    module  hlt1jet = hlt1CaloJet from "HLTrigger/HLTexample/data/hlt1CaloJet.cfi"
    replace hlt1jet.MinPt = 20.0

    sequence HLT1jetPELow = {l1reco & l1s1jetPELow & hlt1jet}

    include "SimGeneral/HepPDTESSource/data/pythiapdt.cfi"
    include "PhysicsTools/HepMCCandAlgos/data/genParticleCandidatesFast.cfi"
#    replace genParticleCandidates.src = "source"

# Veto against muon enriched sample
    include "HLTrigger/Muon/data/PathSingleMu_1032_NoIso.cff"
# Veto against e-gamma samples
    include "HLTrigger/Egamma/data/EgammaHLT.cff"

  block AODEventContent = {
     untracked vstring outputCommands = {
      "drop *",
      "keep *_genParticleCandidates_*_*",
      "keep *_ctfWithMaterialTracks_*_*",
      "keep *_globalMuons_*_*",
      "keep edmTriggerResults_*_*_*",
      "keep *_l1extraParticles_*_*"
     }
  }
  include "RecoJets/Configuration/data/RecoJets_EventContent.cff"
  replace AODEventContent.outputCommands += RecoJetsAOD.outputCommands

  path p = { HLT1jetPELow, !SingleMuNoIsoLevel1Seed, !l1seedSingle, genParticleCandidates }

  module dumpAOD = PoolOutputModule {
    untracked string fileName = "file:skim_Jet20.root"
    using AODEventContent
        untracked PSet SelectEvents = {
          vstring SelectEvents = { "p" }
        }
  }
  endpath e = { dumpAOD }
}
